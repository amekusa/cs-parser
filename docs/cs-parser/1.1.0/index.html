<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home | CS Parser</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/style.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav id="sidebar">
    <h1 class="brand">
        <a href="index.html" title="Home | CS Parser">
            <img src="images/logo-cs-parser@3x.png" alt="Context Sensitive Parser">
        </a>
    </h1>
    <ul>
        <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Composite.html">Composite</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Composite.html#addChild">addChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Composite.html#addChildren">addChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Composite.html#traverse">traverse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Composite.html#verifyChild">verifyChild</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Context.html">Context</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#addChild">addChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#addChildren">addChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#cleanupChildren">cleanupChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#clearBuffer">clearBuffer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#end">end</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#parseChunk">parseChunk</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#populate">populate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#start">start</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#step">step</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#traverse">traverse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#updateState">updateState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Context.html#verifyChild">verifyChild</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ContextManager.html">ContextManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ContextManager.html#feed">feed</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Main.html">Main</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Main.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Main.html#newRule">newRule</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Parser.html">Parser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Parser.html#addRule">addRule</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Parser.html#addRules">addRules</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Parser.html#onComplete">onComplete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Parser.html#parse">parse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Parser.html#parseFile">parseFile</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ResultSet.html">ResultSet</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ResultSet.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ResultSet.html#traverse">traverse</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Rule.html">Rule</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rule.html#addChild">addChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rule.html#addChildren">addChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rule.html#endsWith">endsWith</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rule.html#fin">fin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rule.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rule.html#parse">parse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rule.html#startsWith">startsWith</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rule.html#traverse">traverse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Rule.html#verifyChild">verifyChild</a></span></li>
    </ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1><a href="https://github.com/amekusa/cs-parser"><img src="https://amekusa.github.io/cs-parser/1.1.0/images/logo-cs-parser@3x.png" alt="Context Sensitive Parser" title="Context Sensitive Parser"></a></h1><p><a href="https://badge.fury.io/js/cs-parser"><img src="https://badge.fury.io/js/cs-parser.svg" alt="npm version"></a> <a href="https://david-dm.org/amekusa/cs-parser"><img src="https://david-dm.org/amekusa/cs-parser/status.svg" alt="dependencies Status"></a> <a href="LICENSE"><img src="http://img.shields.io/badge/license-Apache_2.0-blue.svg?style=flat" alt="Apache License 2.0"></a></p>
<h2>Write your own parser LIKE A BOSS</h2><p>CS Parser provides you the power to write parser for your code, data, or anything in any language, any format without hardcore coding.  </p>
<p>You can write the best parser that exactly matches your need even in 120 lines or less.
And it will also be clean, semantic, and completely readable like this example:</p>
<pre class="prettyprint source lang-js"><code>const csp = require('cs-parser')

let parser = csp.create({
  // The rule of doc block
  $doc: {
    start: /\/\*\*$/, // Starts with '/**'
    end:   /\*\/$/,   //   Ends with '*/'
    // Initialize Callback
    // This is called when the parser reached at '/**'
    init(cx, chunk, matches) {
      cx.results.add(`&lt;section class=&quot;docblock&quot;>`)
    },
    // Parse Callback
    // This is called for every line after init() untill fin().
    // The current line is passed as 'chunk'
    parse(cx, chunk) {
      let strip = chunk.match(/(\w.*)$/) // Strip indents
      cx.results.add('  ' + strip[1])
    },
    // Finalize Callback
    // This is called when the parser reached at '*/'
    fin(cx, chunk, matches) {  // Finalize
      cx.results.add(`&lt;/section>`)
    },

    // The rule of @param
    // This is so a sub-rule of doc block in the above
    //   that it only be applied in doc blocks.
    // The name of sub-rule must start with '$'
    $param: {
      start: /@param {(\w+)} (\w+)/, // Starts with '@param {type} name'
      end:   /@\w+/,                 // Ends with any other keyword that starts with '@'
      endsWithParent: true, // This means that this rule also ends with doc block
      // Initialize Callback
      // 'cx' is the context object that can hold any data
      //   during the period of this rule working.
      // 'matches' is the result of regex matching of the 'start' specified in the above
      init(cx, chunk, matches) {
        cx.data = {
          type: matches[1], // Save the parameter type
          name: matches[2]  // Save the parameter name
        }
        cx.results.add(`  &lt;div class=&quot;param&quot;>`)
      },
      // Parse Callback
      // 'cx' is the same instance as the one which has been passed to 'init()'
      parse(cx, chunk) {
        let strip = chunk.match(/(\w.*)$/) // Strip indents
        cx.results.add('    ' + strip[1])
      },
      // Finalize Callback
      fin(cx, chunk, matches) {
        cx.results.add([
          `    &lt;dl class=&quot;specs&quot;>`,
          `      &lt;dt>Type&lt;/dt>`,
          `      &lt;dd>${cx.data.type}&lt;/dd>`,
          `      &lt;dt>Name&lt;/dt>`,
          `      &lt;dd>${cx.data.name}&lt;/dd>`,
          `    &lt;/dl>`,
          `  &lt;/div>`
        ])
        return false // Returning false makes the parser read the same chunk twice
      }
    },

    // The rule of @example
    // This is another sub-rule of doc block
    $example: {
      start: /@example (.+)/, // Starts with '* @example title'
      end:   /@\w+/,          //   Ends with any other keyword that starts with '@'
      endsWithParent: true, // This means that this rule also ends with doc block
      // Initialize Callback
      init(cx, chunk, matches) {
        cx.data = {
          title: matches[1]
        }
        cx.results
          .add(`  &lt;section class=&quot;example&quot;>`)
          .add(`    &lt;h1>${cx.data.title}&lt;/h1>`)
      },
      // Parse Callback
      parse(cx, chunk) {
        let strip = chunk.match(/(\w.*)$/) // Strip indents
        cx.results.add('    ' + strip[1])
      },
      // Finalize Callback
      fin(cx, chunk, matches) {
        cx.results.add(`  &lt;/section>`)
        return false
      },

      // The rule of code example
      // This rule formats a fenced code block as &lt;pre>&lt;code>...&lt;/pre>&lt;/code>
      // This is a sub-rule of @example
      $code: {
        start: /`{3}(\w+)?/, // Starts with '```' (triple backticks)
                             // Also supports language notation like '```js'
        end:   /`{3}$/,      // Ends with '```'
        // Initialize Callback
        init(cx, chunk, matches) {
          cx.data = {
            lang: matches[1] || 'unknown'
          }
          cx.results
            .add(`    &lt;pre>`)
            .add(`      &lt;code class=&quot;lang-${cx.data.lang}&quot;>`)
        },
        // Parse Callback
        parse(cx, chunk) {
          let strip = chunk.match(/(\w.*)$/) // Strip indents
          cx.results.add('        ' + strip[1])
        },
        // Finalize Callback
        fin(cx, chunk, matches) {
          cx.results
            .add(`      &lt;/code>`)
            .add(`    &lt;/pre>`)
        }
      }
    }
  }
})</code></pre><p>This example illustrates how to define rules for formatting doc blocks.<br>As you can see, you can pass nested rule definitions along with the structure of the language you want to parse.  </p>
<p>In this case, the outline of the structure can be described like this:</p>
<pre class="prettyprint source"><code>doc
 ├─ param
 └─ example
     └─ code</code></pre><p>Let's demonstrate parsing actual JavaScript code with the example rules.</p>
<p><code>examples/GameObject.js</code>:</p>
<pre><code class="lang-js">
/**
 * Represents an object in the game
 */
class GameObject {

  /**
   * Creates an instance with specific name and health
   * @param {string} name
   *   The name of the object
   * @param {number} health
   *   The health of the object
   */
  constructor(name, health) {
    this.name = name
    this.health = health
    this.state = 'alive'
  }

  /**
   * Takes specific amount of damage
   * @param {number} amount
   *   Amount of damage to take
   * @example Attack a kobold
   * ```js
   * var enemy = new GameObject('Kobold', 10)
   * enemy.takeDamage(5)
   * console.log(`Health lefts ${this.health}`)
   * ```
   * @example Attack a rat and kill it
   * ```js
   * var enemy = new GameObject('Rat', 3)
   * enemy.takeDamage(5)
   * console.log(`${this.name} must be dead`)
   * ```
   */
  takeDamage(amount) {
    this.health -= amount
    console.log(`${this.name} took ${amount} damage`)
    if (this.health < 0) this.die()
  }

  die() {
    this.state = 'dead'
    console.log(`${this.name} is killed`)
  }
}
</code></pre>

<p>This is the example code to be parsed.
There are two doc blocks in this code as you can see.</p>
<p>To start parsing, pass the file URL to <code>parseFile()</code> like below:</p>
<pre class="prettyprint source lang-js"><code>parser.parseFile(__dirname +'/examples/GameObject.js') // This returns a Promise object
.then(cx => {
  // 'cx' is the root context that contains all the sub-contexts
  // which are generated through the parsing process
  cx.results.traverse(result => {
    console.log(result) // Output the result
  })
})</code></pre><p>So the reading &amp; parsing runs asynchronously, <code>parseFile()</code> returns a <code>Promise</code> object. This <code>Promise</code> resolves when the parsing completed.</p>
<p>If this way is not comfortable for you, there is the synchronous version here:</p>
<pre class="prettyprint source lang-js"><code>let content = fs.readFileSync(__dirname +'/examples/GameObject.js')
let cx = parser.parse(content)
cx.results.traverse(result => {
  console.log(result)
})</code></pre><p>And here is the output:</p>
<pre class="prettyprint source lang-html"><code>&lt;section class=&quot;docblock&quot;>
  Represents an object in the game
&lt;/section>
&lt;section class=&quot;docblock&quot;>
  Creates an instance with specific name and health
  &lt;div class=&quot;param&quot;>
    The name of the object
    &lt;dl class=&quot;specs&quot;>
      &lt;dt>Type&lt;/dt>
      &lt;dd>string&lt;/dd>
      &lt;dt>Name&lt;/dt>
      &lt;dd>name&lt;/dd>
    &lt;/dl>
  &lt;/div>
  &lt;div class=&quot;param&quot;>
    The health of the object
    &lt;dl class=&quot;specs&quot;>
      &lt;dt>Type&lt;/dt>
      &lt;dd>number&lt;/dd>
      &lt;dt>Name&lt;/dt>
      &lt;dd>health&lt;/dd>
    &lt;/dl>
  &lt;/div>
&lt;/section>
&lt;section class=&quot;docblock&quot;>
  Takes specific amount of damage
  &lt;div class=&quot;param&quot;>
    Amount of damage to take
    &lt;dl class=&quot;specs&quot;>
      &lt;dt>Type&lt;/dt>
      &lt;dd>number&lt;/dd>
      &lt;dt>Name&lt;/dt>
      &lt;dd>amount&lt;/dd>
    &lt;/dl>
  &lt;/div>
  &lt;section class=&quot;example&quot;>
    &lt;h1>Attack a kobold&lt;/h1>
    &lt;pre>
      &lt;code class=&quot;lang-js&quot;>
        var enemy = new GameObject('Kobold', 10)
        enemy.takeDamage(5)
        console.log(`Health lefts ${this.health}`)
      &lt;/code>
    &lt;/pre>
  &lt;/section>
  &lt;section class=&quot;example&quot;>
    &lt;h1>Attack a rat and kill it&lt;/h1>
    &lt;pre>
      &lt;code class=&quot;lang-js&quot;>
        var enemy = new GameObject('Rat', 3)
        enemy.takeDamage(5)
        console.log(`${this.name} must be dead`)
      &lt;/code>
    &lt;/pre>
  &lt;/section>
&lt;/section></code></pre><p>You can run this example in your console with:</p>
<pre class="prettyprint source lang-sh"><code>npm run test:examples</code></pre><h2>Usage &amp; APIs</h2><p>At first, you need to install CS Parser via NPM in your console.</p>
<pre class="prettyprint source lang-sh"><code>npm i cs-parser --save</code></pre><p>Then, you can access the APIs of CS Parser by <code>require()</code>.</p>
<pre class="prettyprint source lang-js"><code>const csp = require('cs-parser')</code></pre><p>The <code>csp</code> is the <a href="https://amekusa.github.io/cs-parser/1.1.0/Main.html">Main</a> object that provides few basic methods.</p>
<p><code>create()</code> method creates a <a href="https://amekusa.github.io/cs-parser/1.1.0/Parser.html">Parser</a> object which performs parsing along the rules provided for the parameter.</p>
<pre class="prettyprint source lang-js"><code>let parser = csp.create({
  // Rules
  ...
})</code></pre><p><code>newRule()</code> method creates a <a href="https://amekusa.github.io/cs-parser/1.1.0/Rule.html">Rule</a> object.</p>
<pre class="prettyprint source lang-js"><code>let rule = csp.newRule({
  // Rule definition
  ...
})</code></pre><p>The format of the object for the parameter is the same as <code>create()</code> explained in the first example.</p>
<p>But you can also pass the Rule object to <code>create()</code>.</p>
<pre class="prettyprint source lang-js"><code>let rule = csp.newRule({ ... })
csp.create(rule)</code></pre><h3>The ES6 way</h3><p>You can get the <a href="https://amekusa.github.io/cs-parser/1.1.0/Main.html">Main</a> object with <code>import</code>.</p>
<pre class="prettyprint source lang-js"><code>import CSParser from 'cs-parser'
let rule = CSParser.newRule({ ... })
let parser = CSParser.create(rule)</code></pre><p>Or you can also import <a href="https://amekusa.github.io/cs-parser/1.1.0/Parser.html">Parser</a> and <a href="https://amekusa.github.io/cs-parser/1.1.0/Rule.html">Rule</a> classes directly.</p>
<pre class="prettyprint source lang-js"><code>import Parser from 'cs-parser/lib/Parser'
import Rule   from 'cs-parser/lib/Rule'
let rule = new Rule({ ... })
let parser = new Parser(rule)</code></pre><h2>Links</h2><ul>
<li><a href="https://amekusa.github.io/cs-parser/1.1.0/">Documentations</a></li>
<li><a href="https://github.com/amekusa/cs-parser">GitHub</a></li>
</ul>
<p>Pull requests, issue reports, or any other feedbacks are very helpful for further development! :joy:</p>
<hr>
<p>&copy; 2018 Satoshi Soma (<a href="https://amekusa.com">amekusa.com</a>)<br>CS Parser is licensed under the Apache License, Version 2.0  </p></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Mar 06 2018 20:51:13 GMT+0900 (JST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>